<div class="consulta-container">
  <div class="header">
    <h1>Consulta de Deuda Consolidada</h1>
    <p>Ingrese su n√∫mero de c√©dula para consultar su deuda consolidada de energ√≠a y acueducto.</p>
  </div>

  <!-- Formulario de b√∫squeda -->
  <div class="search-form">
    <div class="form-group">
      <label for="cedula">N√∫mero de C√©dula:</label>
      <input 
        type="text" 
        id="cedula" 
        [(ngModel)]="cedula" 
        placeholder="Ej: 1234500002"
        class="cedula-input"
        [disabled]="isLoading"
        (keyup.enter)="buscarDeuda()"
      >
    </div>
    
    <div class="button-group">
      <button 
        type="button" 
        class="btn-buscar" 
        (click)="buscarDeuda()"
        [disabled]="isLoading || !cedula.trim()"
      >
        <span *ngIf="!isLoading">üîç Buscar</span>
        <span *ngIf="isLoading">‚è≥ Consultando...</span>
      </button>
      
      <button 
        type="button" 
        class="btn-limpiar" 
        (click)="limpiar()"
        [disabled]="isLoading"
      >
        üóëÔ∏è Limpiar
      </button>
    </div>
  </div>

  <!-- Mensaje de error -->
  <div *ngIf="errorMessage" class="error-message">
    <span class="error-icon">‚ö†Ô∏è</span>
    {{ errorMessage }}
  </div>

  <!-- Resultados -->
  <div *ngIf="deudaData" class="results-container">
    <div class="results-header">
      <h2>Informaci√≥n del Cliente</h2>
    </div>
    
    <div class="client-info">
      <div class="info-item">
        <span class="label">Cliente ID:</span>
        <span class="value">{{ deudaData.clienteId }}</span>
      </div>
      <div class="info-item">
        <span class="label">Nombre:</span>
        <span class="value">{{ deudaData.nombreCliente }}</span>
      </div>
      <div class="info-item">
        <span class="label">Fecha de Consulta:</span>
        <span class="value">{{ formatearFecha(deudaData.fechaConsulta) }}</span>
      </div>
    </div>

    <!-- Tabla de servicios -->
    <div class="services-table">
      <h3>Detalle de Servicios</h3>
      
      <table class="services-table-content">
        <thead>
          <tr>
            <th>Servicio</th>
            <th>Per√≠odo</th>
            <th>Consumo</th>
            <th>Valor a Pagar</th>
          </tr>
        </thead>
        <tbody>
          <tr class="service-row energia">
            <td class="service-name">
              <span class="service-icon">‚ö°</span>
              Energ√≠a
            </td>
            <td>{{ deudaData.energia.periodo }}</td>
            <td>{{ deudaData.energia.consumo }}</td>
            <td class="amount">{{ formatearMoneda(deudaData.energia.valorPagar) }}</td>
          </tr>
          <tr class="service-row acueducto">
            <td class="service-name">
              <span class="service-icon">üíß</span>
              Acueducto
            </td>
            <td>{{ deudaData.acueducto.periodo }}</td>
            <td>{{ deudaData.acueducto.consumo }}</td>
            <td class="amount">{{ formatearMoneda(deudaData.acueducto.valorPagar) }}</td>
          </tr>
        </tbody>
        <tfoot>
          <tr class="total-row">
            <td colspan="3" class="total-label">
              <strong>Total a Pagar:</strong>
            </td>
            <td class="total-amount">
              <strong>{{ formatearMoneda(deudaData.totalAPagar) }}</strong>
            </td>
          </tr>
        </tfoot>
      </table>
    </div>
  </div>
</div>
